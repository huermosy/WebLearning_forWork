<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async/await æ‰§è¡Œæœºåˆ¶è¯¦è§£</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .code-block {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .explanation {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid #007acc;
            background-color: #f8f9fa;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .sync-box {
            background: #fff2e8;
            border: 2px solid #fa8c16;
            padding: 15px;
            border-radius: 5px;
        }
        .async-box {
            background: #e6f7ff;
            border: 2px solid #1890ff;
            padding: 15px;
            border-radius: 5px;
        }
        h2 {
            color: #007acc;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>async/await æ‰§è¡Œæœºåˆ¶è¯¦è§£</h1>
        
        <h2>1. æ ¸å¿ƒé—®é¢˜è§£ç­”</h2>
        <div class="explanation">
            <h3>ä½ çš„ç–‘é—®ï¼šawait ä¼šä¸ä¼šå¡ä½ç¨‹åºï¼Ÿ</h3>
            <p><strong>ç­”æ¡ˆï¼šä¼šï¼ä½†åªä¼šå¡ä½å½“å‰å‡½æ•°ï¼Œä¸ä¼šå¡ä½æ•´ä¸ªç¨‹åºã€‚</strong></p>
            
            <ul>
                <li><strong>await çš„ä½œç”¨ï¼š</strong>æš‚åœå½“å‰ async å‡½æ•°çš„æ‰§è¡Œï¼Œç­‰å¾… Promise å®Œæˆ</li>
                <li><strong>å€¼çš„èµ‹å€¼ï¼š</strong>æ˜¯ç›´æ¥èµ‹å€¼ï¼Œä¸æ˜¯å¼•ç”¨ã€‚await ä¼šç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œå°†ç»“æœå€¼èµ‹ç»™ data</li>
                <li><strong>æ‰§è¡Œé¡ºåºï¼š</strong>await åé¢çš„ä»£ç ç¡®å®è¦ç­‰ await å®Œæˆæ‰èƒ½æ‰§è¡Œ</li>
            </ul>
        </div>

        <h2>2. åŒæ­¥ vs å¼‚æ­¥å¯¹æ¯”</h2>
        <div class="comparison">
            <div class="sync-box">
                <h4>ğŸ”’ åŒæ­¥æ‰§è¡Œï¼ˆç±»ä¼¼C++ï¼‰</h4>
                <div class="code-block">
// C++ é£æ ¼çš„åŒæ­¥ä»£ç 
function syncExample() {
    console.log("1. å¼€å§‹");
    
    // è¿™é‡Œä¼šé˜»å¡æ•´ä¸ªç¨‹åº
    let result = blockingOperation(); // å¡ä½3ç§’
    
    console.log("2. ç»“æœ:", result);
    console.log("3. ç»“æŸ");
}

// æ‰§è¡Œé¡ºåºï¼šä¸¥æ ¼æŒ‰é¡ºåºï¼Œä¼šå¡ä½
</div>
            </div>
            
            <div class="async-box">
                <h4>ğŸ”„ å¼‚æ­¥æ‰§è¡Œï¼ˆJavaScriptï¼‰</h4>
                <div class="code-block">
// JavaScript å¼‚æ­¥ä»£ç 
async function asyncExample() {
    console.log("1. å¼€å§‹");
    
    // è¿™é‡Œåªæš‚åœå½“å‰å‡½æ•°ï¼Œä¸é˜»å¡ç¨‹åº
    let result = await asyncOperation(); // ç­‰å¾…3ç§’
    
    console.log("2. ç»“æœ:", result);
    console.log("3. ç»“æŸ");
}

// å…¶ä»–ä»£ç å¯ä»¥ç»§ç»­æ‰§è¡Œ
</div>
            </div>
        </div>

        <h2>3. è¯¦ç»†æ‰§è¡Œæµç¨‹</h2>
        <div class="explanation">
            <h3>å½“æ‰§è¡Œåˆ° `const data = await mockFetch();` æ—¶ï¼š</h3>
            <ol>
                <li><strong>æš‚åœå½“å‰å‡½æ•°ï¼š</strong>getNewWeather() å‡½æ•°åœ¨è¿™é‡Œæš‚åœ</li>
                <li><strong>é‡Šæ”¾çº¿ç¨‹ï¼š</strong>JavaScript ä¸»çº¿ç¨‹è¢«é‡Šæ”¾ï¼Œå¯ä»¥å¤„ç†å…¶ä»–ä»»åŠ¡</li>
                <li><strong>ç­‰å¾…å®Œæˆï¼š</strong>ç­‰å¾… mockFetch() è¿”å›çš„ Promise å®Œæˆ</li>
                <li><strong>è·å–ç»“æœï¼š</strong>Promise å®Œæˆåï¼Œå°†ç»“æœå€¼èµ‹ç»™ data å˜é‡</li>
                <li><strong>ç»§ç»­æ‰§è¡Œï¼š</strong>ç»§ç»­æ‰§è¡Œ await åé¢çš„ä»£ç </li>
            </ol>
        </div>

        <h2>4. å®é™…ä»£ç æ‰§è¡Œé¡ºåºæ¼”ç¤º</h2>
        <div class="code-block">
async function getNewWeather() {
    console.log("A. å‡½æ•°å¼€å§‹æ‰§è¡Œ");
    
    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€ - ç«‹å³æ‰§è¡Œ
    cityEl.textContent = 'åŠ è½½ä¸­...';
    console.log("B. æ˜¾ç¤ºåŠ è½½çŠ¶æ€å®Œæˆ");
    
    // ğŸ”¥ å…³é”®ç‚¹ï¼šè¿™é‡Œä¼šæš‚åœå‡½æ•°æ‰§è¡Œ
    const data = await mockFetch(); // ç­‰å¾…1ç§’
    console.log("C. æ•°æ®è·å–å®Œæˆï¼Œdata =", data);
    
    // åªæœ‰ä¸Šé¢å®Œæˆåï¼Œä¸‹é¢çš„ä»£ç æ‰ä¼šæ‰§è¡Œ
    cityEl.textContent = data.city;
    console.log("D. å¤©æ°”ä¿¡æ¯æ˜¾ç¤ºå®Œæˆ");
}

// æ‰§è¡Œé¡ºåºï¼šA â†’ B â†’ (ç­‰å¾…1ç§’) â†’ C â†’ D
</div>

        <h2>5. ä¸C++çš„å…³é”®åŒºåˆ«</h2>
        <div class="explanation">
            <h3>C++ åŒæ­¥æ¨¡å¼ï¼š</h3>
            <ul>
                <li>ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œæ•´ä¸ªç¨‹åºéƒ½è¦ç­‰å¾…</li>
                <li>æ²¡æœ‰å†…ç½®çš„å¼‚æ­¥æœºåˆ¶</li>
                <li>éœ€è¦æ‰‹åŠ¨ç®¡ç†å¤šçº¿ç¨‹</li>
            </ul>
            
            <h3>JavaScript å¼‚æ­¥æ¨¡å¼ï¼š</h3>
            <ul>
                <li>å•çº¿ç¨‹ï¼Œä½†æœ‰äº‹ä»¶å¾ªç¯æœºåˆ¶</li>
                <li>await åªæš‚åœå½“å‰å‡½æ•°ï¼Œä¸å½±å“å…¶ä»–ä»£ç </li>
                <li>æµè§ˆå™¨å¯ä»¥ç»§ç»­å“åº”ç”¨æˆ·æ“ä½œ</li>
            </ul>
        </div>

        <h2>6. å®é™…æµ‹è¯•éªŒè¯</h2>
        <button onclick="demonstrateExecution()">ğŸ”¬ æ¼”ç¤ºæ‰§è¡Œé¡ºåº</button>
        <div id="demo-output" style="background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 5px;"></div>

        <div class="explanation">
            <h3>å…³é”®è¦ç‚¹æ€»ç»“ï¼š</h3>
            <ul>
                <li><strong>await ç¡®å®ä¼š"å¡ä½"ï¼š</strong>ä½†åªå¡ä½å½“å‰ async å‡½æ•°</li>
                <li><strong>å€¼æ˜¯ç›´æ¥èµ‹å€¼ï¼š</strong>ä¸æ˜¯å¼•ç”¨ï¼Œç­‰å¼‚æ­¥æ“ä½œå®Œæˆåç›´æ¥èµ‹å€¼</li>
                <li><strong>æ‰§è¡Œæ˜¯é¡ºåºçš„ï¼š</strong>await åé¢çš„ä»£ç å¿…é¡»ç­‰ await å®Œæˆ</li>
                <li><strong>ç¨‹åºä¸ä¼šæ­»é”ï¼š</strong>æµè§ˆå™¨ä»ç„¶å¯ä»¥å“åº”å…¶ä»–äº‹ä»¶</li>
            </ul>
        </div>
    </div>

    <script>
        async function mockAsyncOperation() {
            return new Promise(resolve => {
                setTimeout(() => {
                    resolve("å¼‚æ­¥æ“ä½œå®Œæˆï¼");
                }, 2000);
            });
        }

        async function demonstrateExecution() {
            const output = document.getElementById('demo-output');
            output.innerHTML = '';
            
            function log(message) {
                const time = new Date().toLocaleTimeString();
                output.innerHTML += `[${time}] ${message}<br>`;
            }
            
            log("ğŸ”¥ å¼€å§‹æ¼”ç¤º - æ³¨æ„æ—¶é—´é—´éš”");
            log("1. å‡†å¤‡è°ƒç”¨å¼‚æ­¥å‡½æ•°");
            
            // è¿™é‡Œä¼šæš‚åœå‡½æ•°æ‰§è¡Œ2ç§’
            log("2. å¼€å§‹ç­‰å¾…å¼‚æ­¥æ“ä½œï¼ˆawaitï¼‰...");
            const result = await mockAsyncOperation();
            
            // åªæœ‰ä¸Šé¢å®Œæˆåæ‰æ‰§è¡Œ
            log("3. å¼‚æ­¥æ“ä½œå®Œæˆï¼Œç»“æœ: " + result);
            log("4. ç»§ç»­æ‰§è¡Œåç»­ä»£ç ");
            log("âœ… æ¼”ç¤ºå®Œæˆ - è§‚å¯Ÿæ—¶é—´å·®");
        }
    </script>
</body>
</html>